(this.webpackJsonpnew_tokofolio=this.webpackJsonpnew_tokofolio||[]).push([[0],{159:function(e,t,n){},240:function(e,t,n){},246:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},292:function(e,t){},294:function(e,t){},308:function(e,t){},310:function(e,t){},338:function(e,t){},340:function(e,t){},341:function(e,t){},346:function(e,t){},348:function(e,t){},367:function(e,t){},379:function(e,t){},382:function(e,t){},400:function(e,t,n){},401:function(e,t,n){},402:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(0),o=n.n(c),a=n(20),r=n.n(a),i=n(422),l=(n(240),n(9)),j=n(45),d=n(13),u=n(423),h=n(64),b=n(58),m=n(424),O=n(221),p=n(419);var f=Object(p.a)((function(e){var t=e.show,n=e.handleClose,o=e.data,a=void 0===o?{}:o,r=e.cookies,i=e.portfolioID,j=Object(c.useState)(a),d=Object(l.a)(j,2),u=d[0],p=d[1];return Object(s.jsxs)(m.a,{show:t,onHide:n,children:[Object(s.jsx)(m.a.Header,{closeButton:!0,children:Object(s.jsx)(m.a.Title,{children:"Add new tokofolio"})}),Object(s.jsx)(m.a.Body,{children:["symbol","date","qty","price"].map((function(e){return Object(s.jsx)("div",{class:"form-group",children:Object(s.jsx)("input",{type:"text",placeholder:"qty"===e?"quantity":e,style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:e,value:u[e]||"",onChange:function(e){return p(Object(b.a)(Object(b.a)({},u),{},Object(h.a)({},e.target.name,e.target.value)))}})})}))}),Object(s.jsxs)(m.a.Footer,{children:[Object(s.jsx)(O.a,{variant:"secondary",onClick:n,children:"Discard"}),Object(s.jsx)(O.a,{variant:"primary",onClick:function(){var e=r.get("token");fetch("https://intense-dusk-67137.herokuapp.com/users/dashboard/new?token=".concat(e,"&portfolioId=").concat(i),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){null!==e?(n(),alert("added succefully")):alert("something went wrong, try again later")}))},children:"Add"})]})]})}));function x(e){var t=e.show,n=e.handleClose;return Object(s.jsxs)(m.a,{show:t,onHide:n,children:[Object(s.jsx)(m.a.Header,{closeButton:!0,children:Object(s.jsx)(m.a.Title,{children:"Delete account"})}),Object(s.jsx)(m.a.Body,{}),Object(s.jsxs)(m.a.Footer,{children:[Object(s.jsx)(O.a,{variant:"secondary",onClick:n,children:"Discard"}),Object(s.jsx)(O.a,{variant:"primary",onClick:n,children:"Delete"})]})]})}function g(e){var t=e.show,n=e.handleClose,o=e.token,a=Object(c.useState)({}),r=Object(l.a)(a,2),i=r[0],j=r[1];return Object(s.jsxs)(m.a,{show:t,onHide:n,children:[Object(s.jsx)(m.a.Header,{closeButton:!0,children:Object(s.jsx)(m.a.Title,{children:"Add new Tokofolio"})}),Object(s.jsx)(m.a.Body,{children:Object(s.jsx)("input",{type:"text",placeholder:"name of tokofolio",style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:"name",value:i.name,onChange:function(e){return j({name:e.target.value})}})}),Object(s.jsxs)(m.a.Footer,{children:[Object(s.jsx)(O.a,{variant:"secondary",onClick:n,children:"Discard"}),Object(s.jsx)(O.a,{variant:"primary",onClick:function(){fetch("http://localhost:5000/user/portfolio?token=".concat(o),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){null!==e?(n(),alert("added successfully")):alert("something went wrong, try again later")}))},children:"Add"})]})]})}var v=Object(p.a)((function(e){var t=e.show,n=e.handleClose,o=e.item,a=e.index,r=e.cookies,i=e.portfolioID,j=Object(c.useState)(o),d=Object(l.a)(j,2),u=d[0],p=d[1];return Object(s.jsxs)(m.a,{show:t,onHide:n,children:[Object(s.jsx)(m.a.Header,{closeButton:!0,children:Object(s.jsx)(m.a.Title,{children:"Add new tokofolio"})}),Object(s.jsx)(m.a.Body,{children:["symbol","date","qty","price"].map((function(e){return Object(s.jsx)("div",{class:"form-group",children:Object(s.jsx)("input",{type:"text",placeholder:"qty"===e?"quantity":e,style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:e,value:u[e],onChange:function(e){return p(Object(b.a)(Object(b.a)({},u),{},Object(h.a)({},e.target.name,e.target.value)))}})})}))}),Object(s.jsxs)(m.a.Footer,{children:[Object(s.jsx)(O.a,{variant:"secondary",onClick:n,children:"Discard"}),Object(s.jsx)(O.a,{variant:"primary",onClick:function(){var e=r.get("token");fetch("https://intense-dusk-67137.herokuapp.com/user/portfolio?token=".concat(e,"&portfolioId=").concat(i),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(Object(b.a)({index:a},u))}).then((function(e){return e.json()})).then((function(e){null!==e?(n(),alert("update succefull")):alert("something went wrong, try again later")}))},children:"Save"})]})]})})),y=(n(144),n(427)),k=n(426),N=n(425),S=n(222),w=n.p+"static/media/logo.9ae901f8.svg";var C=Object(d.g)(Object(p.a)((function(e){var t=e.cookies,n=Object(c.useState)(!1),o=Object(l.a)(n,2),a=o[0],r=o[1],i=Object(d.f)();return Object(c.useEffect)((function(){r(t.get("token"))}),[t.get("token")]),Object(s.jsx)("div",{className:"Navbar",children:Object(s.jsxs)(y.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(y.a.Brand,{href:"/",children:Object(s.jsx)("img",{alt:"",src:w,width:"72",height:"72",className:"d-inline-block align-top"})}),Object(s.jsx)(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(y.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(k.a,{className:"mr-auto",children:[Object(s.jsx)(k.a.Link,{href:"/dashboard",children:"My Tokofolio"}),a?Object(s.jsx)(k.a.Link,{onClick:function(){t.remove("token"),alert("you succesfully logout"),i.push("/")},children:"Logout"}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(k.a.Link,{href:"/login",children:"Login"}),Object(s.jsx)(k.a.Link,{href:"/register",children:"Register"})]})]}),Object(s.jsxs)(N.a,{inline:!0,children:[Object(s.jsx)(S.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(s.jsx)(O.a,{variant:"outline-success",children:"Search"})]})]})]})})})));function _(e){var t=e.item,n=e.setTotal,o=e.total,a=e.index,r=(e.setUser,e.update),i=e.token,j=e.items,d=e.user,u=Object(c.useState)(0),h=Object(l.a)(u,2),b=h[0],m=h[1],O=Object(c.useState)(0),p=Object(l.a)(O,2),f=p[0],x=p[1],g=Object(c.useState)(!1),y=Object(l.a)(g,2),k=y[0],N=y[1];return Object(c.useEffect)((function(){var e,s=Math.round(1e3*(null===(e=j[t.symbol.toUpperCase()])||void 0===e?void 0:e.quote.USD.price))/1e3||0,c=(s-t.price)*t.qty;m(c),x(s),n(o+c)}),[t]),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:Object(s.jsx)("img",{src:"/cryptocurrency_icons/svg/color/".concat(t.symbol.toLowerCase(),".svg"),alt:"logo",width:"50",height:"50"})}),Object(s.jsx)("td",{children:t.symbol}),Object(s.jsx)("td",{children:t.date}),Object(s.jsx)("td",{children:t.qty}),Object(s.jsx)("td",{children:t.price}),Object(s.jsx)("td",{children:f}),Object(s.jsx)("td",{style:{color:b>0?"green":"red"},children:b.toFixed(2)}),Object(s.jsx)("td",{children:Object(s.jsxs)("div",{className:"d-flex",children:[Object(s.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return N(!0)},children:"Edit"}),k&&Object(s.jsx)(v,{show:k,handleClose:function(){N(!1),r(Symbol())},item:t,index:a,portfolioID:d._id}),Object(s.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){fetch("https://cryptic-sands-87652.herokuapp.com/users/dashboard?token=".concat(i,"&portfolioId=").concat(d._id),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({index:e})}).then((function(e){return e.json()})).then((function(e){null!==e?(r(Symbol()),alert("delete succefull")):alert("something went wrong, try again later")}))}(a)},children:"Remove"})]})})]})}var D=Object(d.g)(Object(p.a)((function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),o=n[0],a=n[1],r=Object(c.useState)(!1),i=Object(l.a)(r,2),j=i[0],d=i[1],h=Object(c.useState)(!1),b=Object(l.a)(h,2),m=b[0],O=b[1],p=Object(c.useState)(0),v=Object(l.a)(p,2),y=v[0],k=v[1],N=Object(c.useState)(null),S=Object(l.a)(N,2),w=S[0],D=S[1],I=Object(c.useState)(!0),T=Object(l.a)(I,2),q=T[0],R=T[1],F=Object(c.useState)(),E=Object(l.a)(F,2),A=E[0],P=E[1],M=Object(c.useState)(null),B=Object(l.a)(M,2),L=B[0],U=B[1],W=Object(c.useState)(null),H=Object(l.a)(W,2),J=H[0],z=H[1],V=e.cookies.get("token");return Object(c.useEffect)((function(){console.log("refres"),R(V),fetch("https://intense-dusk-67137.herokuapp.com/users/dashboard").then((function(e){return e.json()})).then((function(e){U(e)})),fetch("https://intense-dusk-67137.herokuapp.com/users/portfolios?token=".concat(V)).then((function(e){return e.json()})).then((function(e){var t=0;w&&(t=e.findIndex((function(e){return e._id==w._id}))),console.log(t),D(e[-1==t?0:t]),z(e)}))}),[A]),Object(s.jsxs)("div",{className:"container-fluid",children:[Object(s.jsx)(C,{}),w?Object(s.jsx)("div",{className:"container",children:q?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"Welcome to your Tokofolio"}),Object(s.jsxs)("div",{className:"action-button",children:[Object(s.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return a(!0)},children:"Add to Tokofolio"}),o&&Object(s.jsx)(f,{show:o,handleClose:function(){a(!1),P(Symbol())},portfolioID:w._id}),Object(s.jsx)("button",{className:"btn btn-danger  btn-sm",onClick:function(){return O(!0)},children:"Delete Account"}),m&&Object(s.jsx)(x,{show:m,handleClose:function(){O(!1),P(Symbol())}}),Object(s.jsx)("button",{className:"btn btn-secondary  btn-sm",onClick:function(){return d(!0)},children:"Add new Tokofolio"}),j&&Object(s.jsx)(g,{show:j,handleClose:function(){d(!1),P(Symbol())},token:V}),Object(s.jsxs)(u.a,{children:[Object(s.jsx)(u.a.Toggle,{variant:"success",id:"dropdown-basic",children:w.name}),Object(s.jsx)(u.a.Menu,{children:J&&J.map((function(e){return Object(s.jsx)(u.a.Item,{onClick:function(){return D(e)},children:e.name})}))})]})]}),w&&L?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{className:"thead-dark",children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Token"}),Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Date"}),Object(s.jsx)("th",{children:"Qty"}),Object(s.jsx)("th",{children:"Price buy"}),Object(s.jsx)("th",{children:"Price today"}),Object(s.jsx)("th",{children:"P/L"}),Object(s.jsx)("th",{children:"Actions"})]})}),Object(s.jsx)("tbody",{children:(w.portfolio||[]).map((function(e,t){return Object(s.jsx)(_,{item:e,setTotal:k,total:y,index:t,setUser:D,update:P,token:V,items:L,user:w})}))})]}),Object(s.jsxs)("p",{children:["Total: $",Object(s.jsx)("span",{style:{color:y>0?"green":"red"},children:y.toFixed(2)})]})]}):Object(s.jsx)("div",{children:"Your tokofolio is empty"})]}):Object(s.jsx)("div",{children:"your session is expired"})}):Object(s.jsx)("h1",{children:"You need to login first to get access to your Tokofolio"})]})})));n(246);function I(e){var t=e.result,n=void 0===t?{}:t,o=Object(c.useState)(!1),a=Object(l.a)(o,2),r=a[0],i=a[1],j=Object(d.f)();return Object.values(n).map((function(e){return r?Object(s.jsx)(f,{show:r,handleClose:function(){i(!1),j.push("/dashboard")},portfolioID:"ghjfg",data:Object.values(n)[0]}):Object(s.jsxs)("ul",{class:"search-list",children:[Object(s.jsx)("li",{children:e.name}),Object(s.jsx)("li",{children:Object(s.jsx)("img",{src:"/cryptocurrency_icons/svg/color/".concat(e.symbol.toLowerCase(),".svg"),alt:"logo",width:"72",height:"72"})}),Object(s.jsxs)("li",{children:["Symbol: ",e.symbol]}),Object(s.jsxs)("li",{children:["Price: ",e.quote.USD.price]}),Object(s.jsxs)("li",{children:["Volume 24h: ",e.quote.USD.volume_24h]}),Object(s.jsxs)("li",{children:["Percent change last 1h: ",e.quote.USD.percent_change_1h]}),Object(s.jsxs)("li",{children:["Percent change last 24h: ",e.quote.USD.percent_change_24h]}),Object(s.jsxs)("li",{children:["Percent change last 7d: ",e.quote.USD.percent_change_7d]}),Object(s.jsx)("li",{children:Object(s.jsx)("button",{className:"btn btn-primary",onClick:function(){return i(!0)},children:"Add to Tokofolio"})})]})}))}n(247);var T=n(86),q=n.n(T);n(159);function R(e){var t=e.items;return Object(c.useLayoutEffect)((function(){var e=document.querySelector("ul.marquee-content"),t=document.documentElement,n=getComputedStyle(t).getPropertyValue("--marquee-elements-displayed");t.style.setProperty("--marquee-elements",e.children.length);for(var s=0;s<n;s++)e.appendChild(e.children[s].cloneNode(!0))}),[]),Object(s.jsx)("div",{className:"marquee",children:Object(s.jsx)("ul",{className:"marquee-content",children:t.map((function(e){return Object(s.jsxs)("li",{children:[e.symbol,": ",e.quote.USD.price]})}))})})}function F(e){var t=e.items,n=Object(c.useState)(null),o=Object(l.a)(n,2),a=o[0],r=o[1],i=Object(c.useState)(!1),j=Object(l.a)(i,2),d=j[0],u=j[1],h=Object(c.useState)(""),b=Object(l.a)(h,2),m=b[0],O=b[1];return Object(s.jsxs)("div",{className:"add-background",children:[Object(s.jsx)("div",{className:"Ticker",children:t&&Object(s.jsx)(R,{items:t})}),Object(s.jsx)("div",{className:"Navbar",children:Object(s.jsx)(C,{})}),Object(s.jsx)("header",{children:Object(s.jsx)("h1",{children:"Start your Tokofolio today!"})}),Object(s.jsxs)("div",{className:"parent main column",children:[Object(s.jsx)("div",{id:"search-bar-container",className:"parent box search-bar-container ",children:Object(s.jsx)("div",{className:"parent form",children:Object(s.jsxs)("div",{style:{position:"relative"},children:[Object(s.jsx)("input",{type:"text",className:"shadow-lg",placeholder:"Search tokens",size:"50",value:m,onChange:function(e){return O(e.target.value)}}),Object(s.jsx)("button",{style:{position:"absolute",right:"50px"},onClick:function(){u(!0),r(null),fetch("https://intense-dusk-67137.herokuapp.com/coin-portfolio-data?search=".concat(m)).then((function(e){return e.json()})).then((function(e){u(!1),r(e),console.log(e)})).catch((function(e){console.log(e)})).finally((function(){console.log("complete")}))},children:Object(s.jsx)("i",{className:"fas fa-search"})})]})})}),d&&Object(s.jsx)("div",{className:"loader",children:"Loading..."}),a&&Object(s.jsx)(I,{result:a})]})]})}n(160);var E=n(57),A=n.n(E),P=q.a.create({baseURL:"https://intense-dusk-67137.herokuapp.com",timeout:5e3,headers:{"X-Custom-Header":"foobar"}}),M={login:function(e,t,n,s){P.post("/users/login",{email:e,password:t}).then((function(e){if(console.log(e),!e.data.success)return s("Error occurred in login, please try again");n.cookies.set("token",e.data.token,{path:"/",expires:A.a.unix(e.data.expiresAt).toDate()}),n.history.push("/dashboard")})).catch((function(e){console.log(e),s("Error occurred in login, please try again")}))},sendMessage:function(e,t,n){return console.log(e),P.post("/api/v1/message/new",{name:e,room:t,message:n})},syncMessage:function(){return P.get("/api/v1/message/sync",{})},syncMessageByRoom:function(e){return P.get("/api/v1/message/syncbyroom/"+e,{})},addRoom:function(e,t){return P.post("/api/v1/room/new",{from:e,to:t})},syncRooms:function(e){return P.get("/api/v1/room/sync",{headers:{auth_token:e}})},findRoom:function(e){return P.get("/api/v1/room/"+e,{})},register:function(e,t,n,s){P.post("/users/register",{email:e,password:t}).then((function(e){if(console.log(e),!e.data.success)return s("Error occurred in register, please try again");n.cookies.set("token",e.data.token,{path:"/",expires:A.a.unix(e.data.expiresAt).toDate()}),n.history.push("/dashboard")})).catch((function(e){console.log(e),s("Error occurred in register, please try again")}))}},B=Object(p.a)(M);n(284);var L=Object(d.g)(Object(p.a)((function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),o=n[0],a=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],u=Object(c.useState)(""),h=Object(l.a)(u,2),b=h[0],m=h[1];return Object(c.useEffect)((function(){console.log("email",o),console.log("password",j)}),[o,j]),Object(s.jsxs)("div",{className:"container-fluid other-background login",style:{backgroundImage:"url('/background2.svg')"},children:[Object(s.jsx)(C,{}),Object(s.jsx)("h1",{class:"h3 mt-3 mb-3 font-weight-normal",children:"Please Sign In"}),Object(s.jsx)("h3",{className:"text-danger",children:b}),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{for:"email",children:"Email"}),Object(s.jsx)("label",{htmlfor:"inputEmail",class:"sr-only",children:"Email"}),Object(s.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",required:"",autofocus:"",name:"email",value:o,onChange:function(e){a(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{for:"password",class:"sr-only",children:"Password"}),Object(s.jsx)("input",{type:"password",class:"form-control",id:"password",name:"password",onChange:function(e){d(e.target.value)}}),Object(s.jsx)("div",{className:"checkbox mb-3"})]}),Object(s.jsx)("button",{class:"btn btn-primary",onClick:function(){""===o||""===j?m("All fields required"):(m(""),B.login(o,j,e,m))},children:"Sign In"})]})]})})));n(285);var U=Object(d.g)(Object(p.a)((function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),o=n[0],a=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],u=Object(c.useState)(""),h=Object(l.a)(u,2),b=h[0],m=h[1],O=Object(c.useState)(""),p=Object(l.a)(O,2),f=p[0],x=p[1],g=Object(c.useState)(""),v=Object(l.a)(g,2),y=v[0],k=v[1];return Object(c.useEffect)((function(){console.log("firstname",o),console.log("lastname",j),console.log("email",b),console.log("passpord",f)}),[o,j,b,f]),Object(s.jsxs)("div",{className:"container-fluid other-background login",style:{backgroundImage:"url('/background2.svg')"},children:[Object(s.jsx)("img",{className:"mb-4",src:"/../tokofolio_logo1.svg",alt:"200",width:"200",height:"300"}),Object(s.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Please Register"}),Object(s.jsxs)("h3",{className:"text-danger",children:[y," "]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"first_name",className:"sr-only",children:"First Name"}),Object(s.jsx)("input",{type:"text",className:"form-control",placeholder:"First Name",required:"",autoFocus:"",name:"first_name",value:o,onChange:function(e){a(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"last_name",className:"sr-only",children:"Last Name"}),Object(s.jsx)("input",{type:"text",className:"form-control",placeholder:"Last Name",required:"",autoFocus:"",name:"last_name",value:j,onChange:function(e){d(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"inputEmail",className:"sr-only",children:"Email"}),Object(s.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",required:"",autoFocus:"",id:"email",name:"email",value:b,onChange:function(e){m(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),Object(s.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",required:"",id:"password",name:"password",value:f,onChange:function(e){x(e.target.value)}}),Object(s.jsx)("div",{className:"checkbox mb-3",children:Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"checkbox",value:"remember-me"})," Remember me"]})})]}),Object(s.jsx)("button",{className:"btn btn-lg btn-primary btn-block",onClick:function(){""===o||""===j||""===b||""===f?k("All fields required"):(k(""),q.a.post("https://cryptic-sands-87652.herokuapp.com/users/register",{email:b,password:f,first_name:o,last_name:j}).then((function(t){if(console.log(t),!t.data.success)return k("Error occurred in form, please check values");e.cookies.set("token",t.data.token,{path:"/",expires:A.a.unix(t.data.expiresAt).toDate()}),e.history.push("/dashboard")})).catch((function(e){console.log(e),k("Error occurred in form, please check values")})))},children:"Submit"})]})}))),W=n(38),H=n(39),J=n(41),z=n(40),V=(n(286),n(287),n(226)),Y=n.n(V),Q=n(428),X=n(420),$=n(74),G=n.n($),K=n(110),Z=n.n(K),ee=n(111),te=(n(288),n(118)),ne=function(e){Object(J.a)(n,e);var t=Object(z.a)(n);function n(e){var s;return Object(W.a)(this,n),(s=t.call(this,e)).props={addNewChat:!1,gossip:!1},s.state={seed:Math.floor(5e3*Math.random()),userDetail:""},s}return Object(H.a)(n,[{key:"componentDidMount",value:function(){this.setState({userDetail:te.decode(this.props.cookies.get("token"))})}},{key:"createChat",value:function(){var e=prompt("Please enter user email");e&&B.addRoom(this.state.userDetail.email,e)}},{key:"roomSelection",value:function(){console.log(this.props.roomInfo.roomID),this.props.cookies.set("selectedRoom",this.props.roomInfo.roomID)}},{key:"render",value:function(){var e=this;return console.log(this.state.userDetail),console.log(this.props.roomInfo),this.props.addNewChat?Object(s.jsx)("div",{onClick:function(t){e.createChat()},className:"sidebarChat",children:Object(s.jsx)("h2",{children:"Add new chat"})}):Object(s.jsxs)("div",{className:"sidebarChat",onClick:function(t){e.roomSelection()},children:[this.props.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(s.jsx)(Q.a,{src:"https://avatars.dicebear.com/api/human/".concat(t,".svg")})})),Object(s.jsx)("div",{className:"sidebarChat__info",children:this.props.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(s.jsx)("h2",{children:t})}))})]})}}]),n}(o.a.Component),se=Object(p.a)(ne),ce=n(109),oe=n.n(ce),ae=n(118),re=function(e){Object(J.a)(n,e);var t=Object(z.a)(n);function n(e){var s;return Object(W.a)(this,n),(s=t.call(this,e)).state={rooms:[],userDetail:""},s}return Object(H.a)(n,[{key:"componentDidMount",value:function(){var e=this;B.syncRooms(this.props.cookies.get("token")).then((function(t){e.props.cookies.set("rooms",JSON.stringify(t.data)),e.setState({rooms:t.data})})),this.setState({userDetail:ae.decode(this.props.cookies.get("token"))}),new oe.a("639cb43c9e51d063cebf",{cluster:"ap1"}).subscribe("rooms").bind("insert",(function(t){console.log(t),B.syncRooms(e.props.cookies.get("token")).then((function(t){e.props.cookies.set("rooms",JSON.stringify(t.data)),e.setState({rooms:t.data})}))}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"sidebar",children:[Object(s.jsxs)("div",{className:"sidebar__header",children:[Object(s.jsx)(Q.a,{src:"https://avatars.dicebear.com/api/human/".concat(this.state.userDetail.name,".svg")}),Object(s.jsxs)("div",{className:"sidebar__headerRight",children:[Object(s.jsx)(X.a,{children:Object(s.jsx)(Y.a,{})}),Object(s.jsx)(X.a,{children:Object(s.jsx)(G.a,{})}),Object(s.jsx)(X.a,{children:Object(s.jsx)(Z.a,{})})]})]}),Object(s.jsx)("div",{className:"sidebar__search",children:Object(s.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(s.jsx)(ee.SearchOutlined,{}),Object(s.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(s.jsxs)("div",{className:"sidebar__chats",children:[Object(s.jsx)(se,{addNewChat:!0}),this.state.rooms?this.state.rooms.map((function(e){return Object(s.jsx)(se,{roomInfo:e})})):Object(s.jsx)("div",{})]})]})}}]),n}(o.a.Component),ie=Object(p.a)(re),le=n(228),je=n(229),de=n(230),ue=n.n(de),he=(n(400),n(227)),be=n.n(he),me=n(118),Oe=function(e){Object(J.a)(n,e);var t=Object(z.a)(n);function n(e){var s;return Object(W.a)(this,n),(s=t.call(this,e)).state={input:"",userDetail:"",room:s.props.cookies.get("selectedRoom"),roomInfo:"",messages:[]},s}return Object(H.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({userDetail:me.decode(this.props.cookies.get("token"))}),B.syncMessageByRoom(this.props.cookies.get("selectedRoom")).then((function(t){e.setState({messages:t.data})})),B.findRoom(this.state.room).then((function(t){e.setState({roomInfo:t.data})})),new oe.a("639cb43c9e51d063cebf",{cluster:"ap1"}).subscribe("messages").bind("insert",(function(t){console.log(t),t.room===e.state.room&&B.syncMessageByRoom(e.props.cookies.get("selectedRoom")).then((function(t){console.log(t.data[0].timestamp),e.setState({messages:t.data})}))})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){var t=this;this.state.room!==e.cookies.get("selectedRoom")&&(this.setState({room:this.props.cookies.get("selectedRoom")}),B.syncMessageByRoom(this.props.cookies.get("selectedRoom")).then((function(e){t.setState({messages:e.data}),console.log(e.data)})),B.findRoom(this.props.cookies.get("selectedRoom")).then((function(e){console.log(e.data),t.setState({roomInfo:e.data})}))),this.scrollToBottom()}},{key:"sendMessage",value:function(e){e.preventDefault(),B.sendMessage(this.state.userDetail.name,this.state.room,this.state.input),this.setState({input:""})}},{key:"setInput",value:function(e){this.setState({input:e.target.value})}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"chat",children:[Object(s.jsxs)("div",{className:"chat__header",children:[Object(s.jsx)(Q.a,{}),Object(s.jsxs)("div",{className:"chat__headerInfo",children:[this.state.roomInfo?this.state.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(s.jsx)("h3",{children:t})})):"",Object(s.jsx)("p",{children:"Last seen at..."})]}),Object(s.jsxs)("div",{className:"chat__headerRight",children:[Object(s.jsx)(X.a,{children:Object(s.jsx)(ee.SearchOutlined,{})}),Object(s.jsx)(X.a,{children:Object(s.jsx)(le.AttachFile,{})}),Object(s.jsx)(X.a,{children:Object(s.jsx)(K.MoreVert,{})})]})]}),Object(s.jsxs)("div",{className:"chat__body",children:[this.state.messages.map((function(t){return Object(s.jsxs)("p",{className:"chat__message ".concat(t.name===e.state.userDetail.name&&"chat__receiver"),children:[Object(s.jsx)("span",{className:"chat__name",children:t.name}),t.message,Object(s.jsx)("span",{className:"chat__timestamp",children:Object(s.jsx)(be.a,{unix:!0,children:t.timestamp})})]})})),Object(s.jsx)("div",{ref:function(t){e.el=t}})]}),Object(s.jsxs)("div",{className:"chat__footer",children:[Object(s.jsx)(je.InsertEmoticon,{}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{value:this.state.input,onChange:function(t){e.setInput(t)},placeholder:"Type a message",type:"text"}),Object(s.jsx)("button",{onClick:function(t){e.sendMessage(t)},type:"submit",children:"Send a message"})]}),Object(s.jsx)(ue.a,{})]})]})}}]),n}(o.a.Component),pe=Object(p.a)(Oe),fe=n(421),xe=(n(401),function(e){Object(J.a)(n,e);var t=Object(z.a)(n);function n(){return Object(W.a)(this,n),t.apply(this,arguments)}return Object(H.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"login__page ",children:Object(s.jsxs)("div",{className:"login__container",children:[Object(s.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/1c/Whatsapp.webp",alt:""}),Object(s.jsx)("div",{className:"login__text",children:Object(s.jsx)("h1",{children:"Sign in to Tokofolio Chat"})}),Object(s.jsx)(fe.a,{children:Object(s.jsx)(j.b,{to:"/login",className:"login__link",children:"Sign In"})})]})})}}]),n}(o.a.Component)),ge=function(e){Object(J.a)(n,e);var t=Object(z.a)(n);function n(e){var s;return Object(W.a)(this,n),(s=t.call(this,e)).state={showWindow:!1},s}return Object(H.a)(n,[{key:"setWindow",value:function(e){this.setState({showWindow:e})}},{key:"render",value:function(){var e=this;return this.state.showWindow?this.props.cookies.get("token")&&"undefined"!==this.props.cookies.get("token")?Object(s.jsxs)("div",{className:"App",children:[Object(s.jsxs)("div",{className:"app__body",children:[Object(s.jsx)(ie,{}),Object(s.jsx)(pe,{})]}),Object(s.jsx)(X.a,{onClick:function(){e.setWindow(!1)},children:Object(s.jsx)(G.a,{})})]}):Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(xe,{}),Object(s.jsx)(X.a,{onClick:function(){e.setWindow(!1)},children:Object(s.jsx)(G.a,{})})]}):Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(X.a,{onClick:function(){e.setWindow(!0)},children:Object(s.jsx)(G.a,{})})})}}]),n}(o.a.Component),ve=Object(p.a)(ge);function ye(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){fetch("https://cryptic-sands-87652.herokuapp.com/users/dashboard").then((function(e){return e.json()})).then((function(e){o(Object.values(e))}))}),[]),Object(s.jsxs)(j.a,{children:[Object(s.jsxs)(d.c,{children:[Object(s.jsx)(d.a,{path:"/",exact:!0,children:Object(s.jsx)(F,{items:n})}),Object(s.jsx)(d.a,{path:"/dashboard",children:Object(s.jsx)(D,{})}),Object(s.jsx)(d.a,{path:"/register",children:Object(s.jsx)(U,{})}),Object(s.jsx)(d.a,{path:"/login",children:Object(s.jsx)(L,{})}),Object(s.jsx)(d.a,{path:"/chat",children:Object(s.jsx)(ve,{})}),Object(s.jsx)(d.a,{path:"/portfolios/:id",children:Object(s.jsx)(D,{})}),Object(s.jsx)(ve,{})]}),Object(s.jsx)(ve,{})]})}var ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,429)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),o(e),a(e)}))};r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(i.a,{children:Object(s.jsx)(ye,{})})}),document.getElementById("root")),ke()}},[[402,1,2]]]);
//# sourceMappingURL=main.522e0d7e.chunk.js.map