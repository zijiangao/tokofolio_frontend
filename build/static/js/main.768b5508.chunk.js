(this.webpackJsonpnew_tokofolio=this.webpackJsonpnew_tokofolio||[]).push([[0],{161:function(e,t,s){},243:function(e,t,s){},249:function(e,t,s){},286:function(e,t,s){},287:function(e,t,s){},288:function(e,t,s){},289:function(e,t,s){},290:function(e,t,s){},294:function(e,t){},296:function(e,t){},309:function(e,t){},311:function(e,t){},339:function(e,t){},340:function(e,t){},345:function(e,t){},347:function(e,t){},354:function(e,t){},373:function(e,t){},404:function(e,t,s){},405:function(e,t,s){},406:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s(0),o=s.n(c),a=s(26),r=s.n(a),i=s(426),l=(s(243),s(57)),j=s(15),d=s(9),h=s(427),u=s(68),b=s(60),m=s(428),O=s(226),p=s(423);var f=Object(p.a)((function(e){var t=e.show,s=e.handleClose,o=e.data,a=void 0===o?{}:o,r=e.cookies,i=e.portfolioID,l=Object(c.useState)(a),j=Object(d.a)(l,2),h=j[0],p=j[1];return Object(n.jsxs)(m.a,{show:t,onHide:s,children:[Object(n.jsx)(m.a.Header,{closeButton:!0,children:Object(n.jsx)(m.a.Title,{children:"Add new tokofolio"})}),Object(n.jsx)(m.a.Body,{children:["symbol","date","qty","price"].map((function(e){return Object(n.jsx)("div",{class:"form-group",children:Object(n.jsx)("input",{type:"text",placeholder:"qty"===e?"quantity":e,style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:e,value:h[e]||"",onChange:function(e){return p(Object(b.a)(Object(b.a)({},h),{},Object(u.a)({},e.target.name,e.target.value)))}})})}))}),Object(n.jsxs)(m.a.Footer,{children:[Object(n.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(n.jsx)(O.a,{variant:"primary",onClick:function(){var e=r.get("token");fetch("http://localhost:5000/users/dashboard/new?token=".concat(e,"&portfolioId=").concat(i),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(h)}).then((function(e){return e.json()})).then((function(e){null!==e?(s(),alert("added succefully")):alert("something went wrong, try again later")}))},children:"Add"})]})]})}));function x(e){var t=e.show,s=e.handleClose;return Object(n.jsxs)(m.a,{show:t,onHide:s,children:[Object(n.jsx)(m.a.Header,{closeButton:!0,children:Object(n.jsx)(m.a.Title,{children:"Delete account"})}),Object(n.jsx)(m.a.Body,{}),Object(n.jsxs)(m.a.Footer,{children:[Object(n.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(n.jsx)(O.a,{variant:"primary",onClick:s,children:"Delete"})]})]})}function g(e){var t=e.show,s=e.handleClose,o=e.token,a=Object(c.useState)({}),r=Object(d.a)(a,2),i=r[0],l=r[1];return Object(n.jsxs)(m.a,{show:t,onHide:s,children:[Object(n.jsx)(m.a.Header,{closeButton:!0,children:Object(n.jsx)(m.a.Title,{children:"Add new Tokofolio"})}),Object(n.jsx)(m.a.Body,{children:Object(n.jsx)("input",{type:"text",placeholder:"name of tokofolio",style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:"name",value:i.name,onChange:function(e){return l({name:e.target.value})}})}),Object(n.jsxs)(m.a.Footer,{children:[Object(n.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(n.jsx)(O.a,{variant:"primary",onClick:function(){fetch("http://localhost:5000/user/portfolio?token=".concat(o),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){null!==e?(s(),alert("added successfully")):alert("something went wrong, try again later")}))},children:"Add"})]})]})}var v=Object(p.a)((function(e){var t=e.show,s=e.handleClose,o=e.item,a=e.index,r=e.cookies,i=Object(c.useState)(o),l=Object(d.a)(i,2),j=l[0],h=l[1];return Object(n.jsxs)(m.a,{show:t,onHide:s,children:[Object(n.jsx)(m.a.Header,{closeButton:!0,children:Object(n.jsx)(m.a.Title,{children:"Add new tokofolio"})}),Object(n.jsx)(m.a.Body,{children:["symbol","date","qty","price"].map((function(e){return Object(n.jsx)("div",{class:"form-group",children:Object(n.jsx)("input",{type:"text",placeholder:"qty"===e?"quantity":e,style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:e,value:j[e],onChange:function(e){return h(Object(b.a)(Object(b.a)({},j),{},Object(u.a)({},e.target.name,e.target.value)))}})})}))}),Object(n.jsxs)(m.a.Footer,{children:[Object(n.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(n.jsx)(O.a,{variant:"primary",onClick:function(){var e=r.get("token");fetch("http://localhost:5000/user/portfolio?token=".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(Object(b.a)({index:a},j))}).then((function(e){return e.json()})).then((function(e){null!==e?(s(),alert("update succefull")):alert("something went wrong, try again later")}))},children:"Save"})]})]})})),y=s(22),k=s(23),N=s(25),w=s(24),S=(s(146),s(431)),C=s(430),_=s(429),D=s(227),T=s.p+"static/media/logo.9ae901f8.svg",I=function(e){Object(N.a)(s,e);var t=Object(w.a)(s);function s(){return Object(y.a)(this,s),t.apply(this,arguments)}return Object(k.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"Navbar",children:Object(n.jsxs)(S.a,{bg:"light",expand:"lg",children:[Object(n.jsx)(S.a.Brand,{href:"/",children:Object(n.jsx)("img",{alt:"",src:T,width:"72",height:"72",className:"d-inline-block align-top"})}),Object(n.jsx)(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsxs)(S.a.Collapse,{id:"basic-navbar-nav",children:[Object(n.jsxs)(C.a,{className:"mr-auto",children:[Object(n.jsx)(C.a.Link,{href:"/dashboard",children:"My Tokofolio"}),Object(n.jsx)(C.a.Link,{href:"/login",children:"Login"})]}),Object(n.jsxs)(_.a,{inline:!0,children:[Object(n.jsx)(D.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(n.jsx)(O.a,{variant:"outline-success",children:"Search"})]})]})]})})}}]),s}(c.Component);function R(e){var t=e.item,s=e.setTotal,o=e.total,a=e.index,r=(e.setUser,e.update),i=e.token,l=e.items,j=Object(c.useState)(0),h=Object(d.a)(j,2),u=h[0],b=h[1],m=Object(c.useState)(0),O=Object(d.a)(m,2),p=O[0],f=O[1],x=Object(c.useState)(!1),g=Object(d.a)(x,2),y=g[0],k=g[1];return Object(c.useEffect)((function(){var e,n=Math.round(1e3*(null===(e=l[t.symbol.toUpperCase()])||void 0===e?void 0:e.quote.USD.price))/1e3||0,c=(n-t.price)*t.qty;b(c),f(n),s(o+c)}),[t]),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:"/cryptocurrency_icons/svg/color/".concat(t.symbol.toLowerCase(),".svg"),alt:"logo",width:"50",height:"50"})}),Object(n.jsx)("td",{children:t.symbol}),Object(n.jsx)("td",{children:t.date}),Object(n.jsx)("td",{children:t.qty}),Object(n.jsx)("td",{children:t.price}),Object(n.jsx)("td",{children:p}),Object(n.jsx)("td",{style:{color:u>0?"green":"red"},children:u.toFixed(2)}),Object(n.jsx)("td",{children:Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return k(!0)},children:"Edit"}),y&&Object(n.jsx)(v,{show:y,handleClose:function(){k(!1),r(Symbol())},item:t,index:a}),Object(n.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){fetch("http://localhost:5000/users/dashboard?token=".concat(i),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({index:e})}).then((function(e){return e.json()})).then((function(e){null!==e?(r(Symbol()),alert("delete succefull")):alert("something went wrong, try again later")}))}(a)},children:"Remove"})]})})]})}var A=Object(j.f)(Object(p.a)((function(e){var t=Object(c.useState)(!1),s=Object(d.a)(t,2),o=s[0],a=s[1],r=Object(c.useState)(!1),i=Object(d.a)(r,2),l=i[0],j=i[1],u=Object(c.useState)(!1),b=Object(d.a)(u,2),m=b[0],O=b[1],p=Object(c.useState)(0),v=Object(d.a)(p,2),y=v[0],k=v[1],N=Object(c.useState)(null),w=Object(d.a)(N,2),S=w[0],C=w[1],_=Object(c.useState)(!0),D=Object(d.a)(_,2),T=D[0],A=D[1],F=Object(c.useState)(),q=Object(d.a)(F,2),P=q[0],E=q[1],M=Object(c.useState)(null),B=Object(d.a)(M,2),L=B[0],U=B[1],W=Object(c.useState)(null),H=Object(d.a)(W,2),z=H[0],J=H[1],V=e.cookies.get("token");return Object(c.useEffect)((function(){console.log("refres"),A(V),fetch("http://localhost:5000/users/dashboard?token=".concat(V)).then((function(e){return e.json()})).then((function(e){C(e.user),U(e.items),console.log(e.user,e.items)})),fetch("http://localhost:5000/users/portfolios?token=".concat(V)).then((function(e){return e.json()})).then((function(e){J(e)}))}),[P]),Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(I,{}),Object(n.jsx)("h1",{children:"Welcome to your Tokofolio"}),S&&Object(n.jsx)("div",{className:"container",children:T?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"action-button",children:[Object(n.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return a(!0)},children:"Add to Tokofolio"}),o&&Object(n.jsx)(f,{show:o,handleClose:function(){a(!1),E(Symbol())},portfolioID:z&&z[2]}),Object(n.jsx)("button",{className:"btn btn-danger  btn-sm",onClick:function(){return O(!0)},children:"Delete Account"}),m&&Object(n.jsx)(x,{show:m,handleClose:function(){O(!1),E(Symbol())}}),Object(n.jsx)("button",{className:"btn btn-secondary  btn-sm",onClick:function(){return j(!0)},children:"Add new Tokofolio"}),l&&Object(n.jsx)(g,{show:l,handleClose:function(){j(!1),E(Symbol())},token:V}),Object(n.jsxs)(h.a,{children:[Object(n.jsx)(h.a.Toggle,{variant:"success",id:"dropdown-basic",children:"My Tokofolios"}),Object(n.jsx)(h.a.Menu,{children:z&&z.map((function(e){return Object(n.jsx)(h.a.Item,{href:"/portfolios/"+e.id,children:e.name})}))})]})]}),S&&L?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Token"}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Date"}),Object(n.jsx)("th",{children:"Qty"}),Object(n.jsx)("th",{children:"Price buy"}),Object(n.jsx)("th",{children:"Price today"}),Object(n.jsx)("th",{children:"P/L"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:S.portfolio.map((function(e,t){return Object(n.jsx)(R,{item:e,setTotal:k,total:y,index:t,setUser:C,update:E,token:V,items:L})}))})]}),Object(n.jsxs)("p",{children:["Total: $",Object(n.jsx)("span",{style:{color:y>0?"green":"red"},children:y.toFixed(2)})]})]}):Object(n.jsx)("div",{children:"Your tokofolio is empty"})]}):Object(n.jsx)("div",{children:"your session is expired"})})]})})));s(249);function F(e){var t=e.result,s=void 0===t?{}:t;return Object.values(s).map((function(e){return Object(n.jsxs)("ul",{class:"search-list",children:[Object(n.jsx)("li",{children:e.name}),Object(n.jsx)("li",{children:Object(n.jsx)("img",{src:"/cryptocurrency_icons/svg/color/".concat(e.symbol.toLowerCase(),".svg"),alt:"logo",width:"72",height:"72"})}),Object(n.jsxs)("li",{children:["Symbol: ",e.symbol]}),Object(n.jsxs)("li",{children:["Price: ",e.quote.USD.price]}),Object(n.jsxs)("li",{children:["Volume 24h: ",e.quote.USD.volume_24h]}),Object(n.jsxs)("li",{children:["Percent change last 1h: ",e.quote.USD.percent_change_1h]}),Object(n.jsxs)("li",{children:["Percent change last 24h: ",e.quote.USD.percent_change_24h]}),Object(n.jsxs)("li",{children:["Percent change last 7d: ",e.quote.USD.percent_change_7d]}),Object(n.jsx)("li",{children:Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(){fetch("http://localhost:5000/users/dashboard/new?symbol=".concat(e.symbol,"&price=").concat(e.quote.USD.price))},children:"Add to Tokofolio"})})]})}))}var q=s(228),P=s.n(q),E=s(59),M=s.n(E),B=(s(161),M.a.create({baseURL:"https://pro-api.coinmarketcap.com/v1/global-metrics/quotes/latest",timeout:5e3,headers:{"X-CMC_PRO_API_KEY":"process.env.API_KEY"}})),L=function(e){Object(N.a)(s,e);var t=Object(w.a)(s);function s(){var e;Object(y.a)(this,s);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={bitcoin:[]},e}return Object(k.a)(s,[{key:"componentDidMount",value:function(){var e=this;M.a.get(B).then((function(t){console.log(t),e.setState({bitcoin:t.data})}))}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"Ticker",children:Object(n.jsx)(P.a,{Size:"h1",NumberOfOptions:"2",Index0:this.state.bitcoin.map((function(e){return Object(n.jsx)("span",{children:e.name})})),Index1:"I was ...",TimeToCross:"10000",TimeToChange:"2000",IsRandom:"true",Color:"white"})})}}]),s}(c.Component);function U(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),s=t[0],o=t[1],a=Object(c.useState)(!1),r=Object(d.a)(a,2),i=r[0],l=r[1],j=Object(c.useState)(""),h=Object(d.a)(j,2),u=h[0],b=h[1];return Object(n.jsxs)("div",{className:"add-background",children:[Object(n.jsx)("div",{className:"Ticker",children:Object(n.jsx)(L,{})}),Object(n.jsx)("div",{className:"Navbar",children:Object(n.jsx)(I,{})}),Object(n.jsx)("header",{children:Object(n.jsx)("h1",{children:"Start your Tokofolio today!"})}),Object(n.jsxs)("div",{className:"parent main column",children:[Object(n.jsx)("div",{id:"search-bar-container",className:"parent box search-bar-container ",children:Object(n.jsx)("div",{className:"parent form",children:Object(n.jsxs)("div",{style:{position:"relative"},children:[Object(n.jsx)("input",{type:"text",className:"shadow-lg",placeholder:"Search tokens",size:"50",value:u,onChange:function(e){return b(e.target.value)}}),Object(n.jsx)("button",{style:{position:"absolute",right:"50px"},onClick:function(){l(!0),o(null),fetch("http://localhost:5000/coin-portfolio-data?search=".concat(u)).then((function(e){return e.json()})).then((function(e){l(!1),o(e),console.log(e)})).catch((function(e){console.log(e)})).finally((function(){console.log("complete")}))},children:Object(n.jsx)("i",{className:"fas fa-search"})})]})})}),i&&Object(n.jsx)("div",{className:"loader",children:"Loading..."}),s&&Object(n.jsx)(F,{result:s})]})]})}s(162);var W=s(58),H=s.n(W),z=M.a.create({baseURL:"https://cryptic-sands-87652.herokuapp.com/",timeout:5e3,headers:{"X-Custom-Header":"foobar"}}),J={login:function(e,t,s,n){z.post("/users/login",{email:e,password:t}).then((function(e){if(console.log(e),!e.data.success)return n("Error occurred in login, please try again");s.cookies.set("token",e.data.token,{path:"/",expires:H.a.unix(e.data.expiresAt).toDate()}),s.history.push("/dashboard")})).catch((function(e){console.log(e),n("Error occurred in login, please try again")}))},sendMessage:function(e,t,s){return console.log(e),z.post("/api/v1/message/new",{name:e,room:t,message:s})},syncMessage:function(){return z.get("/api/v1/message/sync",{})},syncMessageByRoom:function(e){return z.get("/api/v1/message/syncbyroom/"+e,{})},addRoom:function(e,t){return z.post("/api/v1/room/new",{from:e,to:t})},syncRooms:function(e){return z.get("/api/v1/room/sync",{headers:{auth_token:e}})},findRoom:function(e){return z.get("/api/v1/room/"+e,{})},register:function(e,t,s,n){z.post("/users/register",{email:e,password:t}).then((function(e){if(console.log(e),!e.data.success)return n("Error occurred in register, please try again");s.cookies.set("token",e.data.token,{path:"/",expires:H.a.unix(e.data.expiresAt).toDate()}),s.history.push("/dashboard")})).catch((function(e){console.log(e),n("Error occurred in register, please try again")}))}},V=Object(p.a)(J);s(286);var Y=Object(j.f)(Object(p.a)((function(e){var t=Object(c.useState)(""),s=Object(d.a)(t,2),o=s[0],a=s[1],r=Object(c.useState)(""),i=Object(d.a)(r,2),l=i[0],j=i[1],h=Object(c.useState)(""),u=Object(d.a)(h,2),b=u[0],m=u[1];return Object(c.useEffect)((function(){console.log("email",o),console.log("password",l)}),[o,l]),Object(n.jsxs)("div",{className:"container-fluid other-background login",style:{backgroundImage:"url('/background2.svg')"},children:[Object(n.jsx)(I,{}),Object(n.jsx)("h1",{class:"h3 mt-3 mb-3 font-weight-normal",children:"Please Sign In"}),Object(n.jsx)("h3",{className:"text-danger",children:b}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{for:"email",children:"Email"}),Object(n.jsx)("label",{htmlfor:"inputEmail",class:"sr-only",children:"Email"}),Object(n.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",required:"",autofocus:"",name:"email",value:o,onChange:function(e){a(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{for:"password",class:"sr-only",children:"Password"}),Object(n.jsx)("input",{type:"password",class:"form-control",id:"password",name:"password",onChange:function(e){j(e.target.value)}}),Object(n.jsx)("div",{className:"checkbox mb-3"})]}),Object(n.jsx)("button",{class:"btn btn-primary",onClick:function(){""===o||""===l?m("All fields required"):(m(""),V.login(o,l,e,m))},children:"Sign In"})]})})));s(287);var K=Object(j.f)(Object(p.a)((function(e){var t=Object(c.useState)(""),s=Object(d.a)(t,2),o=s[0],a=s[1],r=Object(c.useState)(""),i=Object(d.a)(r,2),l=i[0],j=i[1],h=Object(c.useState)(""),u=Object(d.a)(h,2),b=u[0],m=u[1],O=Object(c.useState)(""),p=Object(d.a)(O,2),f=p[0],x=p[1],g=Object(c.useState)(""),v=Object(d.a)(g,2),y=v[0],k=v[1];return Object(c.useEffect)((function(){console.log("firstname",o),console.log("lastname",l),console.log("email",b),console.log("passpord",f)}),[o,l,b,f]),Object(n.jsxs)("div",{className:"container-fluid other-background login",style:{backgroundImage:"url('/background2.svg')"},children:[Object(n.jsx)("img",{className:"mb-4",src:"/../tokofolio_logo1.svg",alt:"200",width:"200",height:"300"}),Object(n.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Please Register"}),Object(n.jsxs)("h3",{className:"text-danger",children:[y," "]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"first_name",className:"sr-only",children:"First Name"}),Object(n.jsx)("input",{type:"text",className:"form-control",placeholder:"First Name",required:"",autoFocus:"",name:"first_name",value:o,onChange:function(e){a(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"last_name",className:"sr-only",children:"Last Name"}),Object(n.jsx)("input",{type:"text",className:"form-control",placeholder:"Last Name",required:"",autoFocus:"",name:"last_name",value:l,onChange:function(e){j(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"inputEmail",className:"sr-only",children:"Email"}),Object(n.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",required:"",autoFocus:"",id:"email",name:"email",value:b,onChange:function(e){m(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),Object(n.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",required:"",id:"password",name:"password",value:f,onChange:function(e){x(e.target.value)}}),Object(n.jsx)("div",{className:"checkbox mb-3",children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"checkbox",value:"remember-me"})," Remember me"]})})]}),Object(n.jsx)("button",{className:"btn btn-lg btn-primary btn-block",onClick:function(){""===o||""===l||""===b||""===f?k("All fields required"):(k(""),M.a.post("http://localhost:5000/users/register",{email:b,password:f,first_name:o,last_name:l}).then((function(t){if(console.log(t),!t.data.success)return k("Error occurred in form, please check values");e.cookies.set("token",t.data.token,{path:"/",expires:H.a.unix(t.data.expiresAt).toDate()}),e.history.push("/dashboard")})).catch((function(e){console.log(e),k("Error occurred in form, please check values")})))},children:"Submit"})]})}))),X=(s(288),s(289),s(229)),Q=s.n(X),$=s(432),G=s(424),Z=s(78),ee=s.n(Z),te=s(110),se=s.n(te),ne=s(111),ce=s.n(ne),oe=(s(290),s(118)),ae=function(e){Object(N.a)(s,e);var t=Object(w.a)(s);function s(e){var n;return Object(y.a)(this,s),(n=t.call(this,e)).props={addNewChat:!1,gossip:!1},n.state={seed:Math.floor(5e3*Math.random()),userDetail:""},n}return Object(k.a)(s,[{key:"componentDidMount",value:function(){this.setState({userDetail:oe.decode(this.props.cookies.get("token"))})}},{key:"createChat",value:function(){var e=prompt("Please enter user email");e&&V.addRoom(this.state.userDetail.email,e)}},{key:"roomSelection",value:function(){console.log(this.props.roomInfo.roomID),this.props.cookies.set("selectedRoom",this.props.roomInfo.roomID)}},{key:"render",value:function(){var e=this;return console.log(this.state.userDetail),console.log(this.props.roomInfo),this.props.addNewChat?Object(n.jsx)("div",{onClick:function(t){e.createChat()},className:"sidebarChat",children:Object(n.jsx)("h2",{children:"Add new chat"})}):Object(n.jsxs)("div",{className:"sidebarChat",onClick:function(t){e.roomSelection()},children:[this.props.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(n.jsx)($.a,{src:"https://avatars.dicebear.com/api/human/".concat(t,".svg")})})),Object(n.jsx)("div",{className:"sidebarChat__info",children:this.props.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(n.jsx)("h2",{children:t})}))})]})}}]),s}(o.a.Component),re=Object(p.a)(ae),ie=s(109),le=s.n(ie),je=s(118),de=function(e){Object(N.a)(s,e);var t=Object(w.a)(s);function s(e){var n;return Object(y.a)(this,s),(n=t.call(this,e)).state={rooms:[],userDetail:""},n}return Object(k.a)(s,[{key:"componentDidMount",value:function(){var e=this;V.syncRooms(this.props.cookies.get("token")).then((function(t){e.props.cookies.set("rooms",JSON.stringify(t.data)),e.setState({rooms:t.data})})),this.setState({userDetail:je.decode(this.props.cookies.get("token"))}),new le.a("639cb43c9e51d063cebf",{cluster:"ap1"}).subscribe("rooms").bind("insert",(function(t){console.log(t),V.syncRooms(e.props.cookies.get("token")).then((function(t){e.props.cookies.set("rooms",JSON.stringify(t.data)),e.setState({rooms:t.data})}))}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"sidebar",children:[Object(n.jsxs)("div",{className:"sidebar__header",children:[Object(n.jsx)($.a,{src:"https://avatars.dicebear.com/api/human/".concat(this.state.userDetail.name,".svg")}),Object(n.jsxs)("div",{className:"sidebar__headerRight",children:[Object(n.jsx)(G.a,{children:Object(n.jsx)(Q.a,{})}),Object(n.jsx)(G.a,{children:Object(n.jsx)(ee.a,{})}),Object(n.jsx)(G.a,{children:Object(n.jsx)(se.a,{})})]})]}),Object(n.jsx)("div",{className:"sidebar__search",children:Object(n.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(n.jsx)(ce.a,{}),Object(n.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(n.jsxs)("div",{className:"sidebar__chats",children:[Object(n.jsx)(re,{addNewChat:!0}),this.state.rooms?this.state.rooms.map((function(e){return Object(n.jsx)(re,{roomInfo:e})})):Object(n.jsx)("div",{})]})]})}}]),s}(o.a.Component),he=Object(p.a)(de),ue=s(231),be=s.n(ue),me=s(232),Oe=s.n(me),pe=s(233),fe=s.n(pe),xe=(s(404),s(230)),ge=s.n(xe),ve=s(118),ye=function(e){Object(N.a)(s,e);var t=Object(w.a)(s);function s(e){var n;return Object(y.a)(this,s),(n=t.call(this,e)).state={input:"",userDetail:"",room:n.props.cookies.get("selectedRoom"),roomInfo:"",messages:[]},n}return Object(k.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setState({userDetail:ve.decode(this.props.cookies.get("token"))}),V.syncMessageByRoom(this.props.cookies.get("selectedRoom")).then((function(t){e.setState({messages:t.data})})),V.findRoom(this.state.room).then((function(t){e.setState({roomInfo:t.data})})),new le.a("639cb43c9e51d063cebf",{cluster:"ap1"}).subscribe("messages").bind("insert",(function(t){console.log(t),t.room===e.state.room&&V.syncMessageByRoom(e.props.cookies.get("selectedRoom")).then((function(t){console.log(t.data),e.setState({messages:t.data})}))})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){var t=this;this.state.room!==e.cookies.get("selectedRoom")&&(this.setState({room:this.props.cookies.get("selectedRoom")}),V.syncMessageByRoom(this.props.cookies.get("selectedRoom")).then((function(e){t.setState({messages:e.data}),console.log(e.data)})),V.findRoom(this.props.cookies.get("selectedRoom")).then((function(e){console.log(e.data),t.setState({roomInfo:e.data})}))),this.scrollToBottom()}},{key:"sendMessage",value:function(e){e.preventDefault(),V.sendMessage(this.state.userDetail.name,this.state.room,this.state.input),this.setState({input:""})}},{key:"setInput",value:function(e){this.setState({input:e.target.value})}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return console.log(this.state.room),console.log(this.state.roomInfo),console.log(this.props.cookies.get("selectedRoom")),Object(n.jsxs)("div",{className:"chat",children:[Object(n.jsxs)("div",{className:"chat__header",children:[Object(n.jsx)($.a,{}),Object(n.jsxs)("div",{className:"chat__headerInfo",children:[this.state.roomInfo?this.state.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(n.jsx)("h3",{children:t})})):"",Object(n.jsx)("p",{children:"Last seen at..."})]}),Object(n.jsxs)("div",{className:"chat__headerRight",children:[Object(n.jsx)(G.a,{children:Object(n.jsx)(ce.a,{})}),Object(n.jsx)(G.a,{children:Object(n.jsx)(be.a,{})}),Object(n.jsx)(G.a,{children:Object(n.jsx)(se.a,{})})]})]}),Object(n.jsxs)("div",{className:"chat__body",children:[this.state.messages.map((function(t){return Object(n.jsxs)("p",{className:"chat__message ".concat(t.name===e.state.userDetail.name&&"chat__receiver"),children:[Object(n.jsx)("span",{className:"chat__name",children:t.name}),t.message,Object(n.jsx)("span",{className:"chat__timestamp",children:Object(n.jsx)(ge.a,{unix:!0,children:t.timestamp})})]})})),Object(n.jsx)("div",{ref:function(t){e.el=t}})]}),Object(n.jsxs)("div",{className:"chat__footer",children:[Object(n.jsx)(Oe.a,{}),Object(n.jsxs)("form",{children:[Object(n.jsx)("input",{value:this.state.input,onChange:function(t){e.setInput(t)},placeholder:"Type a message",type:"text"}),Object(n.jsx)("button",{onClick:function(t){e.sendMessage(t)},type:"submit",children:"Send a message"})]}),Object(n.jsx)(fe.a,{})]})]})}}]),s}(o.a.Component),ke=Object(p.a)(ye),Ne=s(425),we=(s(405),function(e){Object(N.a)(s,e);var t=Object(w.a)(s);function s(){return Object(y.a)(this,s),t.apply(this,arguments)}return Object(k.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"login__page ",children:Object(n.jsxs)("div",{className:"login__container",children:[Object(n.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/1c/Whatsapp.webp",alt:""}),Object(n.jsx)("div",{className:"login__text",children:Object(n.jsx)("h1",{children:"Sign in to Tokofolio Chat"})}),Object(n.jsx)(Ne.a,{children:Object(n.jsx)(l.b,{to:"/login",className:"login__link",children:"Sign In"})})]})})}}]),s}(o.a.Component)),Se=function(e){Object(N.a)(s,e);var t=Object(w.a)(s);function s(e){var n;return Object(y.a)(this,s),(n=t.call(this,e)).state={showWindow:!1},n}return Object(k.a)(s,[{key:"setWindow",value:function(e){this.setState({showWindow:e})}},{key:"render",value:function(){var e=this;return this.state.showWindow?this.props.cookies.get("token")&&"undefined"!==this.props.cookies.get("token")?Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("div",{className:"app__body",children:[Object(n.jsx)(he,{}),Object(n.jsx)(ke,{})]}),Object(n.jsx)(G.a,{onClick:function(){e.setWindow(!1)},children:Object(n.jsx)(ee.a,{})})]}):Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(we,{}),Object(n.jsx)(G.a,{onClick:function(){e.setWindow(!1)},children:Object(n.jsx)(ee.a,{})})]}):Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(G.a,{onClick:function(){e.setWindow(!0)},children:Object(n.jsx)(ee.a,{})})})}}]),s}(o.a.Component),Ce=Object(p.a)(Se);function _e(){return Object(n.jsxs)(l.a,{children:[Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{path:"/",exact:!0,children:Object(n.jsx)(U,{})}),Object(n.jsx)(j.a,{path:"/dashboard",children:Object(n.jsx)(A,{})}),Object(n.jsx)(j.a,{path:"/register",children:Object(n.jsx)(K,{})}),Object(n.jsx)(j.a,{path:"/login",children:Object(n.jsx)(Y,{})}),Object(n.jsx)(j.a,{path:"/chat",children:Object(n.jsx)(Ce,{})}),Object(n.jsx)(Ce,{})]}),Object(n.jsx)(Ce,{})]})}var De=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,433)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),o(e),a(e)}))};r.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(i.a,{children:Object(n.jsx)(_e,{})})}),document.getElementById("root")),De()}},[[406,1,2]]]);
//# sourceMappingURL=main.768b5508.chunk.js.map