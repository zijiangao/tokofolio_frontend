(this.webpackJsonpnew_tokofolio=this.webpackJsonpnew_tokofolio||[]).push([[0],{159:function(e,t,s){},240:function(e,t,s){},246:function(e,t,s){},284:function(e,t,s){},285:function(e,t,s){},286:function(e,t,s){},287:function(e,t,s){},288:function(e,t,s){},292:function(e,t){},294:function(e,t){},308:function(e,t){},310:function(e,t){},338:function(e,t){},340:function(e,t){},341:function(e,t){},346:function(e,t){},348:function(e,t){},367:function(e,t){},379:function(e,t){},382:function(e,t){},400:function(e,t,s){},401:function(e,t,s){},402:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s(0),o=s.n(n),a=s(20),r=s.n(a),i=s(422),l=(s(240),s(9)),j=s(45),d=s(13),u=s(423),h=s(64),b=s(58),m=s(424),O=s(221),p=s(419);var f=Object(p.a)((function(e){var t=e.show,s=e.handleClose,o=e.data,a=void 0===o?{}:o,r=e.cookies,i=e.portfolioID,j=Object(n.useState)(a),d=Object(l.a)(j,2),u=d[0],p=d[1];return Object(c.jsxs)(m.a,{show:t,onHide:s,children:[Object(c.jsx)(m.a.Header,{closeButton:!0,children:Object(c.jsx)(m.a.Title,{children:"Add new tokofolio"})}),Object(c.jsx)(m.a.Body,{children:["symbol","date","qty","price"].map((function(e){return Object(c.jsx)("div",{class:"form-group",children:Object(c.jsx)("input",{type:"text",placeholder:"qty"===e?"quantity":e,style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:e,value:u[e]||"",onChange:function(e){return p(Object(b.a)(Object(b.a)({},u),{},Object(h.a)({},e.target.name,e.target.value)))}})})}))}),Object(c.jsxs)(m.a.Footer,{children:[Object(c.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(c.jsx)(O.a,{variant:"primary",onClick:function(){var e=r.get("token");fetch("https://cryptic-sands-87652.herokuapp.com/users/dashboard/new?token=".concat(e,"&portfolioId=").concat(i),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){null!==e?(s(),alert("added succefully")):alert("something went wrong, try again later")}))},children:"Add"})]})]})}));function x(e){var t=e.show,s=e.handleClose;return Object(c.jsxs)(m.a,{show:t,onHide:s,children:[Object(c.jsx)(m.a.Header,{closeButton:!0,children:Object(c.jsx)(m.a.Title,{children:"Delete account"})}),Object(c.jsx)(m.a.Body,{}),Object(c.jsxs)(m.a.Footer,{children:[Object(c.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(c.jsx)(O.a,{variant:"primary",onClick:s,children:"Delete"})]})]})}function g(e){var t=e.show,s=e.handleClose,o=e.token,a=Object(n.useState)({}),r=Object(l.a)(a,2),i=r[0],j=r[1];return Object(c.jsxs)(m.a,{show:t,onHide:s,children:[Object(c.jsx)(m.a.Header,{closeButton:!0,children:Object(c.jsx)(m.a.Title,{children:"Add new Tokofolio"})}),Object(c.jsx)(m.a.Body,{children:Object(c.jsx)("input",{type:"text",placeholder:"name of tokofolio",style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:"name",value:i.name,onChange:function(e){return j({name:e.target.value})}})}),Object(c.jsxs)(m.a.Footer,{children:[Object(c.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(c.jsx)(O.a,{variant:"primary",onClick:function(){fetch("https://cryptic-sands-87652.herokuapp.com/user/portfolio?token=".concat(o),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){null!==e?(s(),alert("added successfully")):alert("something went wrong, try again later")}))},children:"Add"})]})]})}var v=Object(p.a)((function(e){var t=e.show,s=e.handleClose,o=e.item,a=e.index,r=e.cookies,i=e.portfolioID,j=Object(n.useState)(o),d=Object(l.a)(j,2),u=d[0],p=d[1];return Object(c.jsxs)(m.a,{show:t,onHide:s,children:[Object(c.jsx)(m.a.Header,{closeButton:!0,children:Object(c.jsx)(m.a.Title,{children:"Add new tokofolio"})}),Object(c.jsx)(m.a.Body,{children:["symbol","date","qty","price"].map((function(e){return Object(c.jsx)("div",{class:"form-group",children:Object(c.jsx)("input",{type:"text",placeholder:"qty"===e?"quantity":e,style:{color:"grey",fontFamily:"Verdana",fontWeight:"bold",fontSize:"15px",backgroundColor:"white"},size:"30",maxlength:"30",className:"form-control",name:e,value:u[e],onChange:function(e){return p(Object(b.a)(Object(b.a)({},u),{},Object(h.a)({},e.target.name,e.target.value)))}})})}))}),Object(c.jsxs)(m.a.Footer,{children:[Object(c.jsx)(O.a,{variant:"secondary",onClick:s,children:"Discard"}),Object(c.jsx)(O.a,{variant:"primary",onClick:function(){var e=r.get("token");fetch("https://intense-dusk-67137.herokuapp.com/user/portfolio?token=".concat(e,"&portfolioId=").concat(i),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(Object(b.a)({index:a},u))}).then((function(e){return e.json()})).then((function(e){null!==e?(s(),alert("update succefull")):alert("something went wrong, try again later")}))},children:"Save"})]})]})})),y=(s(144),s(427)),k=s(426),N=s(425),S=s(222),w=s.p+"static/media/logo.9ae901f8.svg";var C=Object(d.g)(Object(p.a)((function(e){var t=e.cookies,s=Object(n.useState)(!1),o=Object(l.a)(s,2),a=o[0],r=o[1],i=Object(d.f)();return Object(n.useEffect)((function(){r(t.get("token"))}),[t.get("token")]),Object(c.jsx)("div",{className:"Navbar",children:Object(c.jsxs)(y.a,{bg:"light",expand:"lg",children:[Object(c.jsx)(y.a.Brand,{href:"/",children:Object(c.jsx)("img",{alt:"",src:w,width:"72",height:"72",className:"d-inline-block align-top"})}),Object(c.jsx)(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsxs)(y.a.Collapse,{id:"basic-navbar-nav",children:[Object(c.jsxs)(k.a,{className:"mr-auto",children:[Object(c.jsx)(k.a.Link,{href:"/dashboard",children:"My Tokofolio"}),a?Object(c.jsx)(k.a.Link,{onClick:function(){t.remove("token"),alert("you succesfully logout"),i.push("/")},children:"Logout"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(k.a.Link,{href:"/login",children:"Login"}),Object(c.jsx)(k.a.Link,{href:"/register",children:"Register"})]})]}),Object(c.jsxs)(N.a,{inline:!0,children:[Object(c.jsx)(S.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(c.jsx)(O.a,{variant:"outline-success",children:"Search"})]})]})]})})})));function _(e){var t=e.item,s=e.setTotal,o=e.total,a=e.index,r=(e.setUser,e.update),i=e.token,j=e.items,d=e.user,u=Object(n.useState)(0),h=Object(l.a)(u,2),b=h[0],m=h[1],O=Object(n.useState)(0),p=Object(l.a)(O,2),f=p[0],x=p[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),k=y[0],N=y[1];return Object(n.useEffect)((function(){var e,c=Math.round(1e3*(null===(e=j[t.symbol.toUpperCase()])||void 0===e?void 0:e.quote.USD.price))/1e3||0,n=(c-t.price)*t.qty;m(n),x(c),s(o+n)}),[t]),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("img",{src:"/cryptocurrency_icons/svg/color/".concat(t.symbol.toLowerCase(),".svg"),alt:"logo",width:"50",height:"50"})}),Object(c.jsx)("td",{children:t.symbol}),Object(c.jsx)("td",{children:t.date}),Object(c.jsx)("td",{children:t.qty}),Object(c.jsx)("td",{children:t.price}),Object(c.jsx)("td",{children:f}),Object(c.jsx)("td",{style:{color:b>0?"green":"red"},children:b.toFixed(2)}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return N(!0)},children:"Edit"}),k&&Object(c.jsx)(v,{show:k,handleClose:function(){N(!1),r(Symbol())},item:t,index:a,portfolioID:d._id}),Object(c.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){fetch("https://cryptic-sands-87652.herokuapp.com/users/dashboard?token=".concat(i,"&portfolioId=").concat(d._id),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({index:e})}).then((function(e){return e.json()})).then((function(e){null!==e?(r(Symbol()),alert("delete succefull")):alert("something went wrong, try again later")}))}(a)},children:"Remove"})]})})]})}var D=Object(d.g)(Object(p.a)((function(e){var t=Object(n.useState)(!1),s=Object(l.a)(t,2),o=s[0],a=s[1],r=Object(n.useState)(!1),i=Object(l.a)(r,2),j=i[0],d=i[1],h=Object(n.useState)(!1),b=Object(l.a)(h,2),m=b[0],O=b[1],p=Object(n.useState)(0),v=Object(l.a)(p,2),y=v[0],k=v[1],N=Object(n.useState)(null),S=Object(l.a)(N,2),w=S[0],D=S[1],I=Object(n.useState)(!0),T=Object(l.a)(I,2),q=T[0],R=T[1],F=Object(n.useState)(),E=Object(l.a)(F,2),A=E[0],P=E[1],M=Object(n.useState)(null),B=Object(l.a)(M,2),L=B[0],U=B[1],W=Object(n.useState)(null),H=Object(l.a)(W,2),J=H[0],z=H[1],V=e.cookies.get("token");return Object(n.useEffect)((function(){console.log("refres"),R(V),fetch("https://cryptic-sands-87652.herokuapp.com/users/dashboard").then((function(e){return e.json()})).then((function(e){U(e)})),fetch("https://cryptic-sands-87652.herokuapp.com/users/portfolios?token=".concat(V)).then((function(e){return e.json()})).then((function(e){var t=0;w&&(t=e.findIndex((function(e){return e._id==w._id}))),console.log(t),D(e[-1==t?0:t]),z(e)}))}),[A]),Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsx)(C,{}),w?Object(c.jsx)("div",{className:"container",children:q?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"Welcome to your Tokofolio"}),Object(c.jsxs)("div",{className:"action-button",children:[Object(c.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return a(!0)},children:"Add to Tokofolio"}),o&&Object(c.jsx)(f,{show:o,handleClose:function(){a(!1),P(Symbol())},portfolioID:w._id}),Object(c.jsx)("button",{className:"btn btn-danger  btn-sm",onClick:function(){return O(!0)},children:"Delete Account"}),m&&Object(c.jsx)(x,{show:m,handleClose:function(){O(!1),P(Symbol())}}),Object(c.jsx)("button",{className:"btn btn-secondary  btn-sm",onClick:function(){return d(!0)},children:"Add new Tokofolio"}),j&&Object(c.jsx)(g,{show:j,handleClose:function(){d(!1),P(Symbol())},token:V}),Object(c.jsxs)(u.a,{children:[Object(c.jsx)(u.a.Toggle,{variant:"success",id:"dropdown-basic",children:w.name}),Object(c.jsx)(u.a.Menu,{children:J&&J.map((function(e){return Object(c.jsx)(u.a.Item,{onClick:function(){return D(e)},children:e.name})}))})]})]}),w&&L?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{className:"thead-dark",children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Token"}),Object(c.jsx)("th",{children:"Name"}),Object(c.jsx)("th",{children:"Date"}),Object(c.jsx)("th",{children:"Qty"}),Object(c.jsx)("th",{children:"Price buy"}),Object(c.jsx)("th",{children:"Price today"}),Object(c.jsx)("th",{children:"P/L"}),Object(c.jsx)("th",{children:"Actions"})]})}),Object(c.jsx)("tbody",{children:(w.portfolio||[]).map((function(e,t){return Object(c.jsx)(_,{item:e,setTotal:k,total:y,index:t,setUser:D,update:P,token:V,items:L,user:w})}))})]}),Object(c.jsxs)("p",{children:["Total: $",Object(c.jsx)("span",{style:{color:y>0?"green":"red"},children:y.toFixed(2)})]})]}):Object(c.jsx)("div",{children:"Your tokofolio is empty"})]}):Object(c.jsx)("div",{children:"your session is expired"})}):Object(c.jsx)("h1",{children:"You need to login first to get access to your Tokofolio"})]})})));s(246);function I(e){var t=e.result,s=void 0===t?{}:t,o=Object(n.useState)(!1),a=Object(l.a)(o,2),r=a[0],i=a[1],j=Object(d.f)();return Object.values(s).map((function(e){return r?Object(c.jsx)(f,{show:r,handleClose:function(){i(!1),j.push("/dashboard")},portfolioID:"ghjfg",data:Object.values(s)[0]}):Object(c.jsxs)("ul",{class:"search-list",children:[Object(c.jsx)("li",{children:e.name}),Object(c.jsx)("li",{children:Object(c.jsx)("img",{src:"/cryptocurrency_icons/svg/color/".concat(e.symbol.toLowerCase(),".svg"),alt:"logo",width:"72",height:"72"})}),Object(c.jsxs)("li",{children:["Symbol: ",e.symbol]}),Object(c.jsxs)("li",{children:["Price: ",e.quote.USD.price]}),Object(c.jsxs)("li",{children:["Volume 24h: ",e.quote.USD.volume_24h]}),Object(c.jsxs)("li",{children:["Percent change last 1h: ",e.quote.USD.percent_change_1h]}),Object(c.jsxs)("li",{children:["Percent change last 24h: ",e.quote.USD.percent_change_24h]}),Object(c.jsxs)("li",{children:["Percent change last 7d: ",e.quote.USD.percent_change_7d]}),Object(c.jsx)("li",{children:Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){return i(!0)},children:"Add to Tokofolio"})})]})}))}s(247);var T=s(86),q=s.n(T);s(159);function R(e){var t=e.items;return Object(n.useLayoutEffect)((function(){var e=document.querySelector("ul.marquee-content"),t=document.documentElement,s=getComputedStyle(t).getPropertyValue("--marquee-elements-displayed");t.style.setProperty("--marquee-elements",e.children.length);for(var c=0;c<s;c++)e.appendChild(e.children[c].cloneNode(!0))}),[]),Object(c.jsx)("div",{className:"marquee",children:Object(c.jsx)("ul",{className:"marquee-content",children:t.map((function(e){return Object(c.jsxs)("li",{children:[e.symbol,": ",e.quote.USD.price]})}))})})}function F(e){var t=e.items,s=Object(n.useState)(null),o=Object(l.a)(s,2),a=o[0],r=o[1],i=Object(n.useState)(!1),j=Object(l.a)(i,2),d=j[0],u=j[1],h=Object(n.useState)(""),b=Object(l.a)(h,2),m=b[0],O=b[1];return Object(c.jsxs)("div",{className:"add-background",children:[Object(c.jsx)("div",{className:"Ticker",children:t&&Object(c.jsx)(R,{items:t})}),Object(c.jsx)("div",{className:"Navbar",children:Object(c.jsx)(C,{})}),Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"Start your Tokofolio today!"})}),Object(c.jsxs)("div",{className:"parent main column",children:[Object(c.jsx)("div",{id:"search-bar-container",className:"parent box search-bar-container ",children:Object(c.jsx)("div",{className:"parent form",children:Object(c.jsxs)("div",{style:{position:"relative"},children:[Object(c.jsx)("input",{type:"text",className:"shadow-lg",placeholder:"Search tokens",size:"50",value:m,onChange:function(e){return O(e.target.value)}}),Object(c.jsx)("button",{style:{position:"absolute",right:"50px"},onClick:function(){u(!0),r(null),fetch("https://cryptic-sands-87652.herokuapp.com/coin-portfolio-data?search=".concat(m)).then((function(e){return e.json()})).then((function(e){u(!1),r(e),console.log(e)})).catch((function(e){console.log(e)})).finally((function(){console.log("complete")}))},children:Object(c.jsx)("i",{className:"fas fa-search"})})]})})}),d&&Object(c.jsx)("div",{className:"loader",children:"Loading..."}),a&&Object(c.jsx)(I,{result:a})]})]})}s(160);var E=s(57),A=s.n(E),P=q.a.create({baseURL:"https://cryptic-sands-87652.herokuapp.com",timeout:5e3,headers:{"X-Custom-Header":"foobar"}}),M={login:function(e,t,s,c){P.post("/users/login",{email:e,password:t}).then((function(e){if(console.log(e),!e.data.success)return c("Error occurred in login, please try again");s.cookies.set("token",e.data.token,{path:"/",expires:A.a.unix(e.data.expiresAt).toDate()}),s.history.push("/dashboard")})).catch((function(e){console.log(e),c("Error occurred in login, please try again")}))},sendMessage:function(e,t,s){return console.log(e),P.post("/api/v1/message/new",{name:e,room:t,message:s})},syncMessage:function(){return P.get("/api/v1/message/sync",{})},syncMessageByRoom:function(e){return P.get("/api/v1/message/syncbyroom/"+e,{})},addRoom:function(e,t){return P.post("/api/v1/room/new",{from:e,to:t})},syncRooms:function(e){return P.get("/api/v1/room/sync",{headers:{auth_token:e}})},findRoom:function(e){return P.get("/api/v1/room/"+e,{})},register:function(e,t,s,c){P.post("/users/register",{email:e,password:t}).then((function(e){if(console.log(e),!e.data.success)return c("Error occurred in register, please try again");s.cookies.set("token",e.data.token,{path:"/",expires:A.a.unix(e.data.expiresAt).toDate()}),s.history.push("/dashboard")})).catch((function(e){console.log(e),c("Error occurred in register, please try again")}))}},B=Object(p.a)(M);s(284);var L=Object(d.g)(Object(p.a)((function(e){var t=Object(n.useState)(""),s=Object(l.a)(t,2),o=s[0],a=s[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],u=Object(n.useState)(""),h=Object(l.a)(u,2),b=h[0],m=h[1];return Object(n.useEffect)((function(){console.log("email",o),console.log("password",j)}),[o,j]),Object(c.jsxs)("div",{className:"container-fluid other-background login",style:{backgroundImage:"url('/background2.svg')"},children:[Object(c.jsx)(C,{}),Object(c.jsx)("h1",{class:"h3 mt-3 mb-3 font-weight-normal",children:"Please Sign In"}),Object(c.jsx)("h3",{className:"text-danger",children:b}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{for:"email",children:"Email"}),Object(c.jsx)("label",{htmlfor:"inputEmail",class:"sr-only",children:"Email"}),Object(c.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",required:"",autofocus:"",name:"email",value:o,onChange:function(e){a(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{for:"password",class:"sr-only",children:"Password"}),Object(c.jsx)("input",{type:"password",class:"form-control",id:"password",name:"password",onChange:function(e){d(e.target.value)}}),Object(c.jsx)("div",{className:"checkbox mb-3"})]}),Object(c.jsx)("button",{class:"btn btn-primary",onClick:function(){""===o||""===j?m("All fields required"):(m(""),B.login(o,j,e,m))},children:"Sign In"})]})]})})));s(285);var U=Object(d.g)(Object(p.a)((function(e){var t=Object(n.useState)(""),s=Object(l.a)(t,2),o=s[0],a=s[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],u=Object(n.useState)(""),h=Object(l.a)(u,2),b=h[0],m=h[1],O=Object(n.useState)(""),p=Object(l.a)(O,2),f=p[0],x=p[1],g=Object(n.useState)(""),v=Object(l.a)(g,2),y=v[0],k=v[1];return Object(n.useEffect)((function(){console.log("firstname",o),console.log("lastname",j),console.log("email",b),console.log("passpord",f)}),[o,j,b,f]),Object(c.jsxs)("div",{className:"container-fluid other-background login",style:{backgroundImage:"url('/background2.svg')"},children:[Object(c.jsx)("img",{className:"mb-4",src:"/../tokofolio_logo1.svg",alt:"200",width:"200",height:"300"}),Object(c.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Please Register"}),Object(c.jsxs)("h3",{className:"text-danger",children:[y," "]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"first_name",className:"sr-only",children:"First Name"}),Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"First Name",required:"",autoFocus:"",name:"first_name",value:o,onChange:function(e){a(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"last_name",className:"sr-only",children:"Last Name"}),Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Last Name",required:"",autoFocus:"",name:"last_name",value:j,onChange:function(e){d(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"inputEmail",className:"sr-only",children:"Email"}),Object(c.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",required:"",autoFocus:"",id:"email",name:"email",value:b,onChange:function(e){m(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",required:"",id:"password",name:"password",value:f,onChange:function(e){x(e.target.value)}}),Object(c.jsx)("div",{className:"checkbox mb-3",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",value:"remember-me"})," Remember me"]})})]}),Object(c.jsx)("button",{className:"btn btn-lg btn-primary btn-block",onClick:function(){""===o||""===j||""===b||""===f?k("All fields required"):(k(""),q.a.post("https://cryptic-sands-87652.herokuapp.com/users/register",{email:b,password:f,first_name:o,last_name:j}).then((function(t){if(console.log(t),!t.data.success)return k("Error occurred in form, please check values");e.cookies.set("token",t.data.token,{path:"/",expires:A.a.unix(t.data.expiresAt).toDate()}),e.history.push("/dashboard")})).catch((function(e){console.log(e),k("Error occurred in form, please check values")})))},children:"Submit"})]})}))),W=s(38),H=s(39),J=s(41),z=s(40),V=(s(286),s(287),s(226)),Y=s.n(V),Q=s(428),X=s(420),$=s(74),G=s.n($),K=s(110),Z=s.n(K),ee=s(111),te=(s(288),s(118)),se=function(e){Object(J.a)(s,e);var t=Object(z.a)(s);function s(e){var c;return Object(W.a)(this,s),(c=t.call(this,e)).props={addNewChat:!1,gossip:!1},c.state={seed:Math.floor(5e3*Math.random()),userDetail:""},c}return Object(H.a)(s,[{key:"componentDidMount",value:function(){this.setState({userDetail:te.decode(this.props.cookies.get("token"))})}},{key:"createChat",value:function(){var e=prompt("Please enter user email");e&&B.addRoom(this.state.userDetail.email,e)}},{key:"roomSelection",value:function(){console.log(this.props.roomInfo.roomID),this.props.cookies.set("selectedRoom",this.props.roomInfo.roomID)}},{key:"render",value:function(){var e=this;return console.log(this.state.userDetail),console.log(this.props.roomInfo),this.props.addNewChat?Object(c.jsx)("div",{onClick:function(t){e.createChat()},className:"sidebarChat",children:Object(c.jsx)("h2",{children:"Add new chat"})}):Object(c.jsxs)("div",{className:"sidebarChat",onClick:function(t){e.roomSelection()},children:[this.props.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(c.jsx)(Q.a,{src:"https://avatars.dicebear.com/api/human/".concat(t,".svg")})})),Object(c.jsx)("div",{className:"sidebarChat__info",children:this.props.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(c.jsx)("h2",{children:t})}))})]})}}]),s}(o.a.Component),ce=Object(p.a)(se),ne=s(109),oe=s.n(ne),ae=s(118),re=function(e){Object(J.a)(s,e);var t=Object(z.a)(s);function s(e){var c;return Object(W.a)(this,s),(c=t.call(this,e)).state={rooms:[],userDetail:""},c}return Object(H.a)(s,[{key:"componentDidMount",value:function(){var e=this;B.syncRooms(this.props.cookies.get("token")).then((function(t){e.props.cookies.set("rooms",JSON.stringify(t.data)),e.setState({rooms:t.data})})),this.setState({userDetail:ae.decode(this.props.cookies.get("token"))}),new oe.a("639cb43c9e51d063cebf",{cluster:"ap1"}).subscribe("rooms").bind("insert",(function(t){console.log(t),B.syncRooms(e.props.cookies.get("token")).then((function(t){e.props.cookies.set("rooms",JSON.stringify(t.data)),e.setState({rooms:t.data})}))}))}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsx)(Q.a,{src:"https://avatars.dicebear.com/api/human/".concat(this.state.userDetail.name,".svg")}),Object(c.jsxs)("div",{className:"sidebar__headerRight",children:[Object(c.jsx)(X.a,{children:Object(c.jsx)(Y.a,{})}),Object(c.jsx)(X.a,{children:Object(c.jsx)(G.a,{})}),Object(c.jsx)(X.a,{children:Object(c.jsx)(Z.a,{})})]})]}),Object(c.jsx)("div",{className:"sidebar__search",children:Object(c.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(c.jsx)(ee.SearchOutlined,{}),Object(c.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(c.jsxs)("div",{className:"sidebar__chats",children:[Object(c.jsx)(ce,{addNewChat:!0}),this.state.rooms?this.state.rooms.map((function(e){return Object(c.jsx)(ce,{roomInfo:e})})):Object(c.jsx)("div",{})]})]})}}]),s}(o.a.Component),ie=Object(p.a)(re),le=s(228),je=s(229),de=s(230),ue=s.n(de),he=(s(400),s(227)),be=s.n(he),me=s(118),Oe=function(e){Object(J.a)(s,e);var t=Object(z.a)(s);function s(e){var c;return Object(W.a)(this,s),(c=t.call(this,e)).state={input:"",userDetail:"",room:c.props.cookies.get("selectedRoom"),roomInfo:"",messages:[]},c}return Object(H.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setState({userDetail:me.decode(this.props.cookies.get("token"))}),B.syncMessageByRoom(this.props.cookies.get("selectedRoom")).then((function(t){e.setState({messages:t.data})})),B.findRoom(this.state.room).then((function(t){e.setState({roomInfo:t.data})})),new oe.a("639cb43c9e51d063cebf",{cluster:"ap1"}).subscribe("messages").bind("insert",(function(t){console.log(t),t.room===e.state.room&&B.syncMessageByRoom(e.props.cookies.get("selectedRoom")).then((function(t){console.log(t.data[0].timestamp),e.setState({messages:t.data})}))})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){var t=this;this.state.room!==e.cookies.get("selectedRoom")&&(this.setState({room:this.props.cookies.get("selectedRoom")}),B.syncMessageByRoom(this.props.cookies.get("selectedRoom")).then((function(e){t.setState({messages:e.data}),console.log(e.data)})),B.findRoom(this.props.cookies.get("selectedRoom")).then((function(e){console.log(e.data),t.setState({roomInfo:e.data})}))),this.scrollToBottom()}},{key:"sendMessage",value:function(e){e.preventDefault(),B.sendMessage(this.state.userDetail.name,this.state.room,this.state.input),this.setState({input:""})}},{key:"setInput",value:function(e){this.setState({input:e.target.value})}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chat__header",children:[Object(c.jsx)(Q.a,{}),Object(c.jsxs)("div",{className:"chat__headerInfo",children:[this.state.roomInfo?this.state.roomInfo.usernames.map((function(t){if(t!==e.state.userDetail.name)return Object(c.jsx)("h3",{children:t})})):"",Object(c.jsx)("p",{children:"Last seen at..."})]}),Object(c.jsxs)("div",{className:"chat__headerRight",children:[Object(c.jsx)(X.a,{children:Object(c.jsx)(ee.SearchOutlined,{})}),Object(c.jsx)(X.a,{children:Object(c.jsx)(le.AttachFile,{})}),Object(c.jsx)(X.a,{children:Object(c.jsx)(K.MoreVert,{})})]})]}),Object(c.jsxs)("div",{className:"chat__body",children:[this.state.messages.map((function(t){return Object(c.jsxs)("p",{className:"chat__message ".concat(t.name===e.state.userDetail.name&&"chat__receiver"),children:[Object(c.jsx)("span",{className:"chat__name",children:t.name}),t.message,Object(c.jsx)("span",{className:"chat__timestamp",children:Object(c.jsx)(be.a,{unix:!0,children:t.timestamp})})]})})),Object(c.jsx)("div",{ref:function(t){e.el=t}})]}),Object(c.jsxs)("div",{className:"chat__footer",children:[Object(c.jsx)(je.InsertEmoticon,{}),Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{value:this.state.input,onChange:function(t){e.setInput(t)},placeholder:"Type a message",type:"text"}),Object(c.jsx)("button",{onClick:function(t){e.sendMessage(t)},type:"submit",children:"Send a message"})]}),Object(c.jsx)(ue.a,{})]})]})}}]),s}(o.a.Component),pe=Object(p.a)(Oe),fe=s(421),xe=(s(401),function(e){Object(J.a)(s,e);var t=Object(z.a)(s);function s(){return Object(W.a)(this,s),t.apply(this,arguments)}return Object(H.a)(s,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"login__page ",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/1c/Whatsapp.webp",alt:""}),Object(c.jsx)("div",{className:"login__text",children:Object(c.jsx)("h1",{children:"Sign in to Tokofolio Chat"})}),Object(c.jsx)(fe.a,{children:Object(c.jsx)(j.b,{to:"/login",className:"login__link",children:"Sign In"})})]})})}}]),s}(o.a.Component)),ge=function(e){Object(J.a)(s,e);var t=Object(z.a)(s);function s(e){var c;return Object(W.a)(this,s),(c=t.call(this,e)).state={showWindow:!1},c}return Object(H.a)(s,[{key:"setWindow",value:function(e){this.setState({showWindow:e})}},{key:"render",value:function(){var e=this;return this.state.showWindow?this.props.cookies.get("token")&&"undefined"!==this.props.cookies.get("token")?Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("div",{className:"app__body",children:[Object(c.jsx)(ie,{}),Object(c.jsx)(pe,{})]}),Object(c.jsx)(X.a,{onClick:function(){e.setWindow(!1)},children:Object(c.jsx)(G.a,{})})]}):Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(xe,{}),Object(c.jsx)(X.a,{onClick:function(){e.setWindow(!1)},children:Object(c.jsx)(G.a,{})})]}):Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(X.a,{onClick:function(){e.setWindow(!0)},children:Object(c.jsx)(G.a,{})})})}}]),s}(o.a.Component),ve=Object(p.a)(ge);function ye(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),s=t[0],o=t[1];return Object(n.useEffect)((function(){fetch("https://cryptic-sands-87652.herokuapp.com/users/dashboard").then((function(e){return e.json()})).then((function(e){o(Object.values(e))}))}),[]),Object(c.jsxs)(j.a,{children:[Object(c.jsxs)(d.c,{children:[Object(c.jsx)(d.a,{path:"/",exact:!0,children:Object(c.jsx)(F,{items:s})}),Object(c.jsx)(d.a,{path:"/dashboard",children:Object(c.jsx)(D,{})}),Object(c.jsx)(d.a,{path:"/register",children:Object(c.jsx)(U,{})}),Object(c.jsx)(d.a,{path:"/login",children:Object(c.jsx)(L,{})}),Object(c.jsx)(d.a,{path:"/chat",children:Object(c.jsx)(ve,{})}),Object(c.jsx)(d.a,{path:"/portfolios/:id",children:Object(c.jsx)(D,{})}),Object(c.jsx)(ve,{})]}),Object(c.jsx)(ve,{})]})}var ke=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,429)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,a=t.getTTFB;s(e),c(e),n(e),o(e),a(e)}))};r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(i.a,{children:Object(c.jsx)(ye,{})})}),document.getElementById("root")),ke()}},[[402,1,2]]]);
//# sourceMappingURL=main.430d6137.chunk.js.map